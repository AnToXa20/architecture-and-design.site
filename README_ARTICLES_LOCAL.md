# API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–æ–≤—ã–π API endpoint –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤–º–µ—Å—Ç–æ –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–∞.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–π API Endpoint

**URL**: `/api/db/articles-local`  
**–ú–µ—Ç–æ–¥**: `POST`  
**Content-Type**: `multipart/form-data`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
```
pic2/articles/[slug]/
‚îú‚îÄ‚îÄ main-[–Ω–∞–∑–≤–∞–Ω–∏–µ-—Ñ–∞–π–ª–∞].[—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ]        # –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ block_0_[–Ω–∞–∑–≤–∞–Ω–∏–µ-—Ñ–∞–π–ª–∞].[—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ]     # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–ª–æ–∫–æ–≤
‚îú‚îÄ‚îÄ block_1_[–Ω–∞–∑–≤–∞–Ω–∏–µ-—Ñ–∞–π–ª–∞].[—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ]
‚îî‚îÄ‚îÄ ...
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
- `title` - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `category` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å—Ç–∞—Ç—å–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `publicationDate` - –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `authorId` - ID –∞–≤—Ç–æ—Ä–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã architects (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `shortDescription` - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `status` - –°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'draft')

#### –§–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `mainImage` - –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `blockImage_0`, `blockImage_1`, ... - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –±–ª–æ–∫–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### –ë–ª–æ–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `contentBlocks` - JSON —Å—Ç—Ä–æ–∫–∞ —Å –º–∞—Å—Å–∏–≤–æ–º –±–ª–æ–∫–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```json
[
  {
    "type": "text",
    "content": "–¢–µ–∫—Å—Ç –±–ª–æ–∫–∞",
    "order": 0
  },
  {
    "type": "image", 
    "caption": "–ü–æ–¥–ø–∏—Å—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é",
    "imageIndex": 0,
    "order": 1
  }
]
```

## üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `articles`
- `main_image_url` - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å —Ç–∏–ø–∞ `/pic2/articles/[slug]/main-[—Ñ–∞–π–ª].[ext]`

### –¢–∞–±–ª–∏—Ü–∞ `content_blocks`
- `entity_type` = 'article'
- `entity_id` = ID —Å—Ç–∞—Ç—å–∏
- `image_url` - –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –±–ª–æ–∫–∞

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ slug** –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–µ–π
2. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å slug** - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—É—Ñ—Ñ–∏–∫—Å –ø—Ä–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–∏
3. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤** - —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è + timestamp + —Å–ª—É—á–∞–π–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
4. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫
5. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ
6. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏

1. –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ slug
3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `articles`
4. –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ—Ä–æ–º (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
5. –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ —Å—Ç–∞—Ç—å–∏
6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
7. –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–ª–æ–∫–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ `content_blocks`
8. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

## üìÅ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ admin.html

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Ç—Ä–µ—Ç—å–µ–º –±–ª–æ–∫–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å—è–º–∏":

- **–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è** —Å drag & drop –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–ë–ª–æ–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤—Ç–æ—Ä–æ–≤** –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `test_articles_local.html`:

- **–ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- **Drag & drop** –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏** –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** –∑–∞–ø—Ä–æ—Å–æ–≤

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ `test_articles_local.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –¥–æ–±–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏

## üìä –û—Ç–≤–µ—Ç API

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "success": true,
  "message": "–°—Ç–∞—Ç—å—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞",
  "articleId": 123,
  "slug": "test-article-with-images",
  "folderPath": "test-article-with-images"
}
```

### –û—à–∏–±–∫–∞
```json
{
  "success": false,
  "error": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- **server.js**: –ù–æ–≤—ã–π API endpoint `/api/db/articles-local`
- **admin.html**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π (–±–ª–æ–∫ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å—è–º–∏")
- **test_articles_local.html**: –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **pic2/articles/**: –ü–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å—Ç–∞—Ç–µ–π

## üÜö –û—Ç–ª–∏—á–∏—è –æ—Ç –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫ | –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ |
|----------|-------------|-------------------|
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –ú–µ–¥–ª–µ–Ω–Ω–æ | –ë—ã—Å—Ç—Ä–æ |
| **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ç–∏ | –õ–æ–∫–∞–ª—å–Ω–æ |
| **–ö–æ–Ω—Ç—Ä–æ–ª—å** | –í–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å | –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å |
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∞** | –°–ª–æ–∂–Ω–∞—è | –ü—Ä–æ—Å—Ç–∞—è |
| **API** | `/api/db/articles` | `/api/db/articles-local` |
| **–ü—É—Ç—å –≤ –ë–î** | URL –Ω–∞ –¥–∏—Å–∫ | –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å |

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ `pic2/articles/` –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏.

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, WEBP, GIF
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ multer
- Slug –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç–∞—Ç—å–∏
- –ü—Ä–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ slug –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–π —Å—É—Ñ—Ñ–∏–∫—Å 